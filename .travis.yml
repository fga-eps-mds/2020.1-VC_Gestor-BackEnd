language: node_js
node_js:
    - "node"

services:
    - docker

notifications:
    email: false

branches:
    only:
        - master
        - development    

matrix:
    include:
        - env: TARGET=packages/resolution
        - env: TARGET=packages/user
        - env: TARGET=packages/benefits
        - env: TARGET=packages/news

script: cd $TARGET && npm install && npm run test;

deploy:
    # Build Docker container and push to Docker Hub
    provider: script
    script: bash deploy.sh
    on:
      branch: development